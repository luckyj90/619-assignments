<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Web Mastermind</title>
		<meta charset="utf-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"> </script>
		<script>
			
			
			var answerKey = ["R", "G", "B", "Y"];
			var randomAnswer = "";

			for(var i = 0; i < 4; i++){
			var	randColor = (Math.floor(Math.random() * answerKey.length));
			randomAnswer += answerKey[randColor];
			}

			//replace window onliad with jQuery
			$(document).ready(function(){
				var submitButton = document.getElementById("submitAnswer");
				submitButton.onclick = handleButtonClick;
			});
			
			
			//use jQuery to evaluate user guesses
			function handleButtonClick() {
				var userInput = document.getElementById("userGuess");
				var newGuess = userInput.value;
				
				var correctSpot = 0;
				var correctColor = 0;	

				$(function(){
					for(var i = 0; i < 4; i++){
						if (newGuess.charAt(i) == randomAnswer.charAt(i)) {
							correctSpot++;
						}
					}
				
				
					if(correctSpot == 4) {
						alert("Congratulations! You won!");
						
						var resetButton = document.createElement("input");
						location.reload(true);
					}
				});
				
				var li = document.createElement("li");
				li.innerHTML = newGuess + " Spots Correct: " + correctSpot + " Colors Correct: " + correctColor;
				var prevGuess = document.getElementById("previousGuesses");
				prevGuess.appendChild(li);

				totalGuesses--;
				if(totalGuesses < 1) {
					alert("Sorry you lost");
					location.reload(true);
				}
				
				correctSpot = 0;
				correctColor = 0;
			}
			
		</script>
		<style>
			#previousGuesses {
				font-family: "Courier New", Courier, monospace;	
			}
		</style>
	</head>
	<body>
		<h1>Mastermind</h1>
		<p>The Mastermind is a code generating game where you must guess the code phrase randomly generated by the computer. Each code phrase will consist of some combination of the colors red, green, blue, and yellow. In order to guess you must enter the letter to match each color you think may be in the code: R B G or Y. There are only four colors in each code (e.g. RRBY, GRBB, YBGB, etc)</p>
		<p> After you guess you will be told how many guesses are the correct color in the correct spot and how many are a correct color but an incorrect spot. You will have 20 turns to guess the correct pass code. Each guess will be displayed below the board.</p>
		<form>
		<input id="userGuess" type="text" placeholder="Guess Here"><br>
		<input type="button" id="submitAnswer" value="Submit Answer">
		</form>
		<ul id="previousGuesses">

		</ul>
		<div id="reset"> </div>
	</body>
</html>